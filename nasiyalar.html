function renderNasiyaList() {
  const list = document.getElementById("nasiyaList");
  list.innerHTML = "";
  let total = 0;

  nasiyalar.forEach((item) => {
    total += item.qoldiq;

    const el = document.createElement("div");
    el.className = "nasiya";

    const header = document.createElement("div");
    header.className = "nasiya-header";
    header.textContent = `${item.ism} - ${formatSum(item.qoldiq)}`;

    const tarix = document.createElement("div");
    tarix.className = "tarix";
    tarix.innerHTML = item.tarix
      .filter(x => !x.includes("pul berdi") || !x.includes("0 so'm"))
      .map(x => `<div>${x}</div>`).join("");

    // ❗️Event listener orqali bitta bosishda ochiladi
    header.addEventListener("click", () => {
      tarix.style.display = tarix.style.display === "block" ? "none" : "block";
    });

    el.appendChild(header);
    el.appendChild(tarix);
    list.appendChild(el);
  });

  document.getElementById("totalSum").textContent = `Nasiyalar: ${formatSum(total)}`;
}
